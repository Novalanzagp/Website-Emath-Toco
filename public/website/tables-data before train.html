<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Before Train</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Link Bootstrap Table-->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> -->
 
  <!-- Favicons -->
  <link href="assets/img/et.png" rel="icon">
  <link href="assets/img/emath-toco.png" rel="emath-toco">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js"></script>

  <script>
    function getData(){
      const url = 'https://colab.research.google.com/drive/1Q1PXz_v4PQHA-UQcB95IvsAH92E01YiM?usp=sharing'
      window.open(url);
    }
  </script>

<script>
  function downloadData(){
    const url = 'http://127.0.0.1:5000/download-csv/'
    window.open(url);
  }
</script>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <!-- <img src="website\assets\img\emath-toco.png" alt="">  -->
        <!--logo web-->
        <span class="d-none d-lg-block">EMATH TOCO</span>
      </a>
    </div>
    <!-- End Logo -->

    <!-- Sign Out -->
    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">
        <li class="nav-item">
          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="../index.html">
            <span class="d-flex align-items-center">Sign Out</span>
          </a>
        </li>
      </ul>
    </nav>
    <!-- End Sign Out -->

  </header><!-- End Header -->


  <main id="main" class="main">
        <!-- Left side columns -->
        <div class="col-lg-8">
          <div class="row">

            <section class="section">
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-body">
                      <h5 class="card-title">Data Mahasiswa</h5>
                      
                      <div class="container mt-3">
                        <table class="Table">
                          <thead>
                            <th>No.</th>
                            <th>Kelas</th>
                            <th>Matkul</th>
                            <th>Nama</th>
                            <th>NIM</th>
                            <th>Nomor</th>
                          </thead>
                          <tbody id="tbody1"></tbody>
                        </table>
                      </div>
        
                      <script type="module">
                      //---------------------Filling the table-----------------------//
                        var stdNo = 0;
                        var tbody = document.getElementById('tbody1');
                        
                        function AddItemToTable(kelas,matkul,nama,nim,no){
                          let trow = document.createElement("tr");
                          let td1 = document.createElement("td");
                          let td2 = document.createElement("td");
                          let td3 = document.createElement("td");
                          let td4 = document.createElement("td");
                          let td5 = document.createElement("td");
                          let td6 = document.createElement("td");
        
                          td1.innerHTML= ++stdNo;
                          td2.innerHTML= kelas;
                          td3.innerHTML= matkul;
                          td4.innerHTML= nama;
                          td5.innerHTML= nim;
                          td6.innerHTML= no;
        
                          trow.appendChild(td1);
                          trow.appendChild(td2);
                          trow.appendChild(td3);
                          trow.appendChild(td4);
                          trow.appendChild(td5);
                          trow.appendChild(td6);
        
                          tbody.appendChild(trow);
                        }
        
                        function AddAllItemsToTable(TheStudent){
                          stdNo=0;
                          tbody.innerHTML="";
                          TheStudent.forEach(element => {
                            AddItemToTable(element.kelas, element.matul, element.nama, element.nim, element.no);
                          });
                        }
        
                        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
                        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-analytics.js";
        
                        const firebaseConfig = {
                          apiKey: "AIzaSyAYWjSzIMVzXhnyKGymgdxHmoIagZZp01M",
                          authDomain: "emathtoco-bec56.firebaseapp.com",
                          databaseURL: "https://emathtoco-bec56-default-rtdb.firebaseio.com",
                          projectId: "emathtoco-bec56",
                          storageBucket: "emathtoco-bec56.appspot.com",
                          messagingSenderId: "784908974272",
                          appId: "1:784908974272:web:9cef11f196a698225d5525",
                          measurementId: "G-NTMR4BZ9SZ"
                        };
        
                        // Initialize Firebase
                        const app = initializeApp(firebaseConfig);
                        const analytics = getAnalytics(app);
        
                        import { getDatabase, ref, child, onValue, get}
                        from "https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js";
        
                        const db = getDatabase();
        
                        // ---------------Getting All Data-------------------------//
        
                        function GetAllDataOnce(){
                          const dbRef = ref(db);
        
                          get(child(dbRef,"Mahasiswa"))
                          .then((snapshot)=>{
        
                            var students = [];
        
                            snapshot.forEach(childSnapshot => {
                              students.push(childSnapshot.val());
                            });
        
                            AddAllItemsToTable(students);
                          })
                        }
        
                        function GetAllDataRealtime(){
                          const dbRef = ref(db,"Mahasiswa");
        
                          onValue(dbRef,(snapshot)=>{
                            var students = [];
        
                            snapshot.forEach(childSnapshot => {
                              students.push(childSnapshot.val());
                            });
        
                            AddAllItemsToTable(students);
                          })
                        }
        
                        window.onload = GetAllDataRealtime;
        
                      </script>
        
        
        
                    </div>
                  </div>
        
                </div>
              </div>

            </section>

            <!-- <section class="section error-404 min-vh-100 d-flex flex-column align-items-center justify-content-center"> -->
              <!-- <a class="btn" href="https://colab.research.google.com/drive/1S52x96N7MHWPpT8ImZxvcdtVdb2AyZ7L?usp=sharing/">Get Data</a>
              <div class="credits">
              </div>

              <a class="btn" href="http://127.0.0.1:5000/download-csv/">Download</a>
              <div class="credits">
              </div> -->
            <!-- </section> -->

            <button onclick="getData()">
              Get Data
            </button>

            <button onclick="downloadData()">
              Download Data
            </button>


  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>Emath Toco</span></strong>. All Rights Reserved
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>